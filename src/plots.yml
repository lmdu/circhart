general:
  -
    name: plot_id
    type: readonly
  -
    name: plot_type
    type: readonly
  -
    name: plot_name
    type: readonly
  -
    name: karyotypes
    type: readonly
  -
    name: karyotype
    type: hidden

ideogram:
  -
    name: spacing
    label: Default spacing
    type: float
    range:
      - 0
      - 1
    decimal: 5
    step: 0.001
    default: 0.005
  -
    name: radius
    type: float
    range:
      - 0
      - 1
    decimal: 5
    step: 0.001
    default: 0.9
  -
    name: thickness
    type: int
    range:
      - 0
      - 200
    default: 30
  -
    name: fill
    type: bool
    default: 'yes'
  -
    name: stroke_thickness
    type: int
    range:
      - 0
      - 20
    default: 1
  -
    name: stroke_color
    type: color
    default: 0,0,0
  -
    name: show_bands
    type: group
    default: 'no'
  -
    name: fill_bands
    type: bool
    default: 'yes'
    parent: show_bands
  -
    name: band_stroke_thickness
    type: int
    range:
      - 0
      - 100
    default: 0
    parent: show_bands
  -
    name: band_stroke_color
    type: color
    default: 255,255,255
    parent: show_bands
  -
    name: band_data
    type: choices
    source: banddata
    parent: show_bands
    tooltip: "Add custom band data to karyotype file"

spaces:
  -
    name: pairwise
    label: between
    type: chroms
  -
    name: spacing
    type: int
    range:
      - 0
      - 1000

labels:
  -
    name: show_label
    type: bool
    default: 'no'
  -
    name: label_radius
    type: radius
    label: Label position
  -
    name: label_format
    type: choice
    source:
      - label
      - name
  -
    name: label_font
    type: choice
    source:
      - light
      - normal
      - default
      - semibold
      - bold
      - italic
      - bolditalic
      - italicbold
    default: default
  -
    name: label_center
    type: bool
    default: 'yes'
  -
    name: label_size
    type: int
    range:
      - 0
      - 200
    default: 48
  -
    name: label_color
    type: color
    default: 0,0,0
  -
    name: label_parallel
    type: bool
    default: 'yes'
  -
    name: label_case
    type: choice
    source:
      - upper
      - lower

ticks:
  -
    name: show_ticks
    type: bool
    default: 'no'
    level: 0
  -
    name: show_tick_labels
    type: bool
    default: 'yes'
    level: 0
  -
    name: chromosomes_units
    type: int
    step: 1000
    range:
      - 0
      - 1000000000
    default: 1000000
    level: 0
  -
    name: radius
    type: radius
    label: Tick position
    level: 0
  -
    name: label_multiplier
    type: str
    default: '1e-6'
    level: 0
  -
    name: orientation
    type: choice
    source:
      - out
      - in
    level: 0
  -
    name: color
    type: color
    default: 0,0,0
    level: 1
  -
    name: thickness
    type: int
    default: 2
    range:
      - 0
      - 100
    level: 1
  -
    name: spacing
    type: int
    range:
      - 0
      - 200
    level: 1
  -
    name: size
    type: int
    range:
      - 0
      - 200
    default: 10
    level: 1
  -
    name: show_label
    type: group
    default: 'no'
    level: 1
  -
    name: label_size
    type: int
    range:
      - 0
      - 100
    default: 20
    parent: show_label
    level: 1
  -
    name: label_offset
    type: int
    range:
      - 0
      - 100
    default: 10
    parent: show_label
    level: 1
  -
    name: format
    type: int
    label: Label decimals
    range:
      - 0
      - 5
    default: 0
    parent: show_label
    level: 1

tracks:
  scatter:
    -
      name: data
      type: choices
      source: plotdata
    -
      name: r0r1
      type: annulus
      tooltip: the inner and outer radius of the plot track
    -
      name: glyph
      type: choice
      source:
        - circle
        - rectangle
        - triangle
      tooltip: shape of glyph to use for the scatter plot
    -
      name: glyph_size
      type: int
      range:
        - 0
        - 100
      default: 10
      tooltip: size of the glyph, in pixels
    -
      name: color
      type: color
      default: 150,150,150
      tooltip: if used, the glyph will be solid and of this color
    -
      name: stroke_color
      type: color
      default: 0,0,0
      tooltip: if used, the glyph will have an outline of this color
    -
      name: stroke_thickness
      type: int
      range:
        - 0
        - 100
      default: 0
      tooltip: if used, the glyph's outline will have this thickness, in pixels
    -
      name: orientation
      type: choice
      source:
        - out
        - in
      disable: true

  line:
    -
      name: data
      type: choices
      source: plotdata
    -
      name: r0r1
      type: annulus
      label: radius
      tooltip: the inner and outer radius of the plot track
    -
      name: color
      type: color
      default: 0,0,0
      tooltip: line color
    -
      name: thickness
      type: int
      range:
        - 0
        - 100
      default: 1
      tooltip: line width
    -
      name: orientation
      type: choice
      source:
        - out
        - in
      disable: true

  histogram:
    -
      name: data
      type: choices
      source: plotdata
    -
      name: r0r1
      type: annulus
      label: radius
      tooltip: the inner and outer radius of the plot track
    -
      name: color
      type: color
      default: 0,0,0
      tooltip: line color
    -
      name: stroke_thickness
      type: int
      range:
        - 0
        - 100
      default: 1
      tooltip: line width
    -
      name: fill_color
      type: color
      default: 255,255,255
      tooltip: the bin fill color
    -
      name: extend_bin
      type: bool
      default: 'no'
      tooltip: the bin's left and right sides are extended to the mid-point between this and the neighbouring bin

  heatmap:
    -
      name: data
      type: choices
      source: plotdata
    -
      name: r0r1
      type: annulus
      label: radius
      tooltip: the inner and outer radius of the plot track
    -
      name: color
      type: colors
      label: colors
    -
      name: stroke_thickness
      type: int
      range:
        - 0
        - 100
      default: 0
    -
      name: stroke_color
      type: color
      default: 255,255,255

  tile:
    -
      name: data
      type: choices
      source: locidata
    -
      name: r0r1
      type: annulus
      label: radius
      tooltip: the inner and outer radius of the plot track
    -
      name: color
      type: color
      default: 150,150,150
    -
      name: stroke_color
      type: color
      default: 217,217,217
    -
      name: stroke_thickness
      type: int
      range:
        - 0
        - 100
      default: 1
    -
      name: layers
      type: int
      range:
        - 0
        - 100
      default: 10
    -
      name: layers_overflow
      type: choice
      source:
        - hide
        - collapse
        - grow
    -
      name: margin
      type: int
      range:
        - 0
        - 100
      default: 1
    -
      name: padding
      type: int
      range:
        - 0
        - 100
      default: 3
    -
      name: thickness
      type: int
      range:
        - 0
        - 100
      default: 10

  text:
    -
      name: data
      type: choices
      source: textdata
    -
      name: r0r1
      type: annulus
      label: radius
      tooltip: the inner and outer radius of the plot track
    -
      name: label_font
      type: choice
      source:
        - default
        - light
        - normal
        - semibold
        - bold
        - italic
        - bolditalic
        - italicbold
    -
      name: label_size
      type: int
      range:
        - 0
        - 100
      default: 12
    -
      name: color
      type: color
      default: 0,0,0
    -
      name: padding
      type: int
      range:
        - 0
        - 100
      default: 0
    -
      name: rpadding
      type: int
      range:
        - 0
        - 100
      default: 0
    -
      name: show_links
      type: group
      default: 'no'
    - 
      name: link_thickness
      type: int
      range:
        - 0
        - 100
      default: 1
      parent: show_links
    -
      name: link_color
      type: color
      default: 251,106,74
      parent: show_links
    -
      name: label_snuggle
      type: group
      default: 'no'
    -
      name: max_snuggle_distance
      type: int
      range:
        - 0
        - 100
      default: 1
      parent: label_snuggle
    -
      name: snuggle_sampling
      type: int
      range:
        - 0
        - 100
      default: 1
      parent: label_snuggle
    -
      name: snuggle_tolerance
      type: float
      range:
        - 0
        - 1
      decimal: 2
      default: 0.25
      step: 0.01
      parent: label_snuggle
    -
      name: snuggle_refine
      type: bool
      default: 'no'
      parent: label_snuggle
    -
      name: snuggle_link_overlap_test
      type: bool
      default: 'no'
      parent: label_snuggle
    -
      name: snuggle_link_overlap_tolerance
      type: int
      range:
        - 0
        - 100
      default: 2
      parent: label_snuggle

  connector:
    -
      name: data
      type: choices
      source: locidata
    -
      name: r0r1
      type: annulus
      label: radius
      tooltip: the inner and outer radius of the plot track
    -
      name: thickness
      type: int
      range:
        - 0
        - 100
      default: 1
    -
      name: color
      type: color
      default: 0,0,0

  highlight:
    -
      name: data
      type: choices
      source: locidata
    -
      name: ideogram
      type: bool
      default: 'no'
      tooltip: toggles the position of the highlight to be within the ideogram extent
    -
      name: r0r1
      type: annulus
      mutex: ideogram
      label: radius
      tooltip: the inner and outer radius of the plot track
    -
      name: fill_color
      type: color
      default: 150,150,150,0.4
      tooltip: color of the highlight slice
    -
      name: stroke_color
      type: color
      default: 0,0,0,0.4
      tooltip: color of the highlight border, drawn if stroke_thickness is set
    -
      name: stroke_thickness
      type: int
      range:
        - 0
        - 100
      default: 0
      tooltip: border thickness, if any, of the highlight slice
    -
      name: z
      type: int
      range:
        - 0
        - 10000
      label: Z Depth
      default: 1
      tooltip: z-depth of the highlight, controlling the order in which highlights are drawn

  link:
    -
      name: data
      type: choices
      source: linkdata
    -
      name: ribbon
      type: bool
      default: 'no'
    -
      name: color
      type: color
      default: 0,0,0
      tooltip: color of the link line
    -
      name: thickness
      type: int
      range:
        - 0
        - 100
      default: 1
      tooltip: thickness of the link line
    -
      name: radius
      type: float
      range:
        - 0
        - 1
      step: 0.01
      decimal: 3
      default: 0.4
      tooltip: the radial position of the termination of the link
    -
      name: bezier_radius
      type: float
      range:
        - 0
        - 10
      step: 0.01
      decimal: 2
      default: 0
      tooltip:  the radial position of the third control point used to draw the Bezier curve
    -
      name: crest
      type: float
      range:
        - 0
        - 10
      step: 0.01
      decimal: 2
      default: 0.5
    -
      name: bezier_radius_purity
      type: float
      range:
        - 0
        - 1
      step: 0.01
      decimal: 2
      default: 0.75
    -
      name: stroke_color
      type: color
      mutex: ~ribbon
      default: 202,202,202
      tooltip: work with ribbon yes
    -
      name: stroke_thickness
      type: int
      mutex: ~ribbon
      range:
        - 0
        - 100
      default: 1
      tooltip: work with ribbon yes
    -
      name: flat
      type: bool
      mutex: ~ribbon
      default: 'yes'
      tooltip: all your ribbons untwisted
    -
      name: z
      type: int
      hide: true
      range:
        - 0
        - 10000
      label: Z Depth
      default: 1
      tooltip: z-depth of the links

rules:
  scatter:
    -
      name: condition
      type: condition
      label: false
      tests:
        -
          name: value
          type: number
    -
      name: style
      type: style
      label: false
      attrs:
        - glyph
        - glyph_size
        - color
        - stroke_color
        - stroke_thickness

  line:
    -
      name: condition
      type: condition
      label: false
      tests:
        -
          name: value
          type: number

    -
      name: style
      type: style
      label: false
      attrs:
        - color
        - thickness

  histogram:
    -
      name: condition
      type: condition
      label: false
      tests:
        -
          name: value
          type: number

    -
      name: style
      type: style
      label: false
      attrs:
        - color
        - fill_color
        - stroke_thickness

  heatmap:
    -
      name: condition
      type: condition
      label: false
      tests:
        -
          name: value
          type: number

    -
      name: style
      type: style
      label: false
      attrs:
        - color

  text:
    -
      name: condition
      type: condition
      label: false
      tests:
        -
          name: value
          type: text

    -
      name: style
      type: style
      label: false
      attrs:
        - color
        - label_size

  link:
    -
      name: condition
      type: condition
      label: false
      tests:
        -
          name: chr1
          type: chrome
        -
          name: chr2
          type: chrome
        -
          name: start1
          type: number
        -
          name: start2
          type: number
        -
          name: end1
          type: number
        -
          name: end2
          type: number
        -
          name: position1
          type: size
        -
          name: position2
          type: size
        -
          name: size1
          type: size
        -
          name: size2
          type: size
        -
          name: rev1
          type: bool
        -
          name: rev2
          type: bool
        - 
          name: inv
          type: bool
        -
          name: interchr
          type: bool
        -
          name: intrachr
          type: bool
        -
          name: 'on'
          type: chrom
        -
          name: 'on'
          type: position
        -
          name: from
          type: chrom
        -
          name: to
          type: chrom
        -
          name: between
          type: chroms
        -
          name: fromto
          type: chroms
        -
          name: tofrom
          type: chroms
        -
          name: within
          type: position
    -
      name: style
      type: style
      label: false
      attrs:
        - color
        - thickness
        - z
        - crest
        - bezier_radius
        - bezier_radius_purity

axes:
  -
    name: spacing
    type: float
    range:
      - 0
      - 1
    decimal: 3
    step: 0.01
  -
    name: position
    type: float
    range:
      - 0
      - 1
    decimal: 3
    step: 0.01
  -
    name: color
    type: color
    default: 240,240,240
  -
    name: thickness
    type: int
    range:
      - 0
      - 100
    default: 1

backgrounds:
  -
    name: y0
    type: float
    range:
      - 0
      - 1
    decimal: 3
    step: 0.01
  -
    name: y1
    type: float
    range:
      - 0
      - 1
    decimal: 3
    step: 0.01
  -
    name: color
    type: color
    default: 240,240,240

snail:
  #-
  #  name: segments
  #  type: int
  #  range:
  #    - 0
  #    - 10000000
  #  default: 1000
  #  tooltip: segment count for snail plot
  #-
  #  name: max_span
  #  type: float
  #  decimal: 0
  #  range:
  #    - 0
  #    - 100000000000
  #  tooltip: max span for snail plot
  #-
  #  name: max_scaffold
  #  type: float
  #  decimal: 0
  #  range:
  #    - 0
  #    - 1000000000
  #  tooltip: max scaffold length for snail plot
  general:
    -
      name: plot_id
      type: readonly
    -
      name: plot_name
      type: readonly
    -
      name: plot_type
      type: readonly
    -
      name: genome
      type: hidden

  plot:
    -
      name: dataset_name
      type: str
      default: snail
    -
      name: show_numbers
      type: bool
      default: 'no'
      tooltip: show numbers instead of percentages in snail plot
    -
      name: busco_numbers
      type: bool
      default: 'no'
      tooltip: show busco numbers instead of percentages in snail plot legend      

  busco:
    - 
      name: busco_lineage
      type: str
    -
      name: busco_count
      label: Total BUSCOs
      type: int
      range:
        - 0
        - 100000
    -
      name: singlecopy
      type: int
      label: Single-copy BUSCOs (S)
      range:
        - 0
        - 100000
    -
      name: duplicated
      type: int
      label: Duplicated BUSCOs (D)
      range:
        - 0
        - 100000
    -
      name: fragmented
      type: int
      label: Fragmented BUSCOs (F)
      range:
        - 0
        - 100000

